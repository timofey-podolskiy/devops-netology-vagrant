# Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

    ```
    ipconfig (windows)
    ip a (linux)
   ```

2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

    ```
    протокол LLDP
    команда lldpctl
    пакет lldpd
   ```

3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

    ```
    VLAN
    пакет vlan
   
    пример конфига
   
    network:
        version: 2
        renderer: networkd
        ethernets:
            eth0:
                dhcp4: false
        vlans:   
            vlan10:
                id: 10
                link: eth0
                dhcp4: no
                addresses: [10.10.10.3/24]
                nameservers:
                    addresses: [8.8.8.8]

   ```

4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

    ```
    Mode-0(balance-rr) – Данный режим используется по умолчанию. Balance-rr обеспечивается балансировку нагрузки и отказоустойчивость. В данном режиме сетевые пакеты отправляются “по кругу”, от первого интерфейса к последнему. Если выходят из строя интерфейсы, пакеты отправляются на остальные оставшиеся. Дополнительной настройки коммутатора не требуется при нахождении портов в одном коммутаторе. При разностных коммутаторах требуется дополнительная настройка.


    Mode-1(active-backup) – Один из интерфейсов работает в активном режиме, остальные в ожидающем. При обнаружении проблемы на активном интерфейсе производится переключение на ожидающий интерфейс. Не требуется поддержки от коммутатора.
    
    
    Mode-2(balance-xor) – Передача пакетов распределяется по типу входящего и исходящего трафика по формуле ((MAC src) XOR (MAC dest)) % число интерфейсов. Режим дает балансировку нагрузки и отказоустойчивость. Не требуется дополнительной настройки коммутатора/коммутаторов.
    
    
    Mode-3(broadcast) – Происходит передача во все объединенные интерфейсы, тем самым обеспечивая отказоустойчивость. Рекомендуется только для использования MULTICAST трафика.
    
    
    Mode-4(802.3ad) – динамическое объединение одинаковых портов. В данном режиме можно значительно увеличить пропускную способность входящего так и исходящего трафика. Для данного режима необходима поддержка и настройка коммутатора/коммутаторов.
    
    
    Mode-5(balance-tlb) – Адаптивная балансировки нагрузки трафика. Входящий трафик получается только активным интерфейсом, исходящий распределяется в зависимости от текущей загрузки канала каждого интерфейса. Не требуется специальной поддержки и настройки коммутатора/коммутаторов.
    
    
    Mode-6(balance-alb) – Адаптивная балансировка нагрузки. Отличается более совершенным алгоритмом балансировки нагрузки чем Mode-5). Обеспечивается балансировку нагрузки как исходящего так и входящего трафика. Не требуется специальной поддержки и настройки коммутатора/коммутаторов.
    
    Пример конфига
   
    network:
        version: 2
        renderer: networkd
        bonds:
            bond0:
                dhcp4: yes
                interfaces:
                    - enp3s0
                    - enp4s0
                parameters:
                    mode: 802.3ad
                    mii-monitor-interval: 1
 
   ```

5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

    ```
    Всего 8 адресов в сети /29
    32 подсети /29 может быть в сети /24
    10.10.10.0/29,
    10.10.10.8/29 и т.д.
   ```

6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

    ```
    Остается CGN (Carrier-Grade NAT) 100.64.0.0 — 100.127.255.255 (маска подсети 255.192.0.0 или /10)
  
    root@vagrant:~# ipcalc 100.64.0.0/10 -s 50
    Address:   100.64.0.0           01100100.01 000000.00000000.00000000
    Netmask:   255.192.0.0 = 10     11111111.11 000000.00000000.00000000
    Wildcard:  0.63.255.255         00000000.00 111111.11111111.11111111
    =>
    Network:   100.64.0.0/10        01100100.01 000000.00000000.00000000
    HostMin:   100.64.0.1           01100100.01 000000.00000000.00000001
    HostMax:   100.127.255.254      01100100.01 111111.11111111.11111110
    Broadcast: 100.127.255.255      01100100.01 111111.11111111.11111111
    Hosts/Net: 4194302               Class A
    
    1. Requested size: 50 hosts
       Netmask:   255.255.255.192 = 26 11111111.11111111.11111111.11 000000
       Network:   100.64.0.0/26        01100100.01000000.00000000.00 000000
       HostMin:   100.64.0.1           01100100.01000000.00000000.00 000001
       HostMax:   100.64.0.62          01100100.01000000.00000000.00 111110
       Broadcast: 100.64.0.63          01100100.01000000.00000000.00 111111
       Hosts/Net: 62                    Class A
    
    Needed size:  64 addresses.
    Used network: 100.64.0.0/26
    Unused:
    100.64.0.64/26
    100.64.0.128/25
    100.64.1.0/24
    100.64.2.0/23
    100.64.4.0/22
   
    Оптимально использовать 100.64.0.0/26 на 64 хоста
   ```

7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

    В Windows для просмотра используем `arp -a`, для удаления `arp -d`, для очистки кэша `netsh interface ip delete arpcache`.
   
    В Linux для просмотра используем `ip neigh`, для удаления `ip neigh del`, для полной очистки таблицы `ip neigh flush`.